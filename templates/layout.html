<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>{% block title %}{% endblock %}</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='assets/css/main.css') }}">
		<noscript><link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='assets/css/noscript.css') }}"></noscript>
		<link rel="stylesheet" href="{{ url_for('static',filename='assets/css/sweetalert2.min.css') }}">
	</head>
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    {{ message }}
                {% endfor %}
            {% endif %}
        {% endwith %}
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Three -->
					<section id="three" class="wrapper style1 fade-up">
						<div class="inner">
						    {% block content %}
						    {% endblock %}
						</div>
					</section>

			</div>

		<!-- Footer -->
			<footer id="footer" class="wrapper style1-alt">
				<div class="inner">
					<ul class="menu">
						    {% block footer %}
						    {% endblock %}
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="{{ url_for('static',filename='assets/js/jquery.min.js') }}"></script>
			<script src="{{ url_for('static',filename='assets/js/jquery.scrollex.min.js') }}"></script>
			<script src="{{ url_for('static',filename='assets/js/jquery.scrolly.min.js') }}"></script>
			<script src="{{ url_for('static',filename='assets/js/browser.min.js') }}"></script>
			<script src="{{ url_for('static',filename='assets/js/breakpoints.min.js') }}"></script>
			<script src="{{ url_for('static',filename='assets/js/util.js') }}"></script>
			<script src="{{ url_for('static',filename='assets/js/main.js') }}"></script>
			<script src="{{ url_for('static',filename='assets/js/socket.io.js') }}"></script>
			<script src="{{ url_for('static',filename='assets/js/sweetalert2.all.min.js') }}"></script>
			<script type="text/javascript" charset="utf-8">
			    var socket = io();
			    socket.on('connect', function() {
				console.log("connected");
				socket.emit('waitany');
			    });
			    socket.on('invoice', function(result) {
				console.log("recieved invoice");
				console.log(`result["data"] is ${result["data"]}`);
				var parsedResult = result["data"];
				console.log(`parsedResult is ${parsedResult}`);
				var satsReceived = parseFloat(parsedResult["msatoshi"]) / 1000;
				Swal.fire({
					title: 'Invoice Recieved',
					text: `${satsReceived}sats received`,
					icon: 'success',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Confirm'
				});
				// forever wait for invoice
				socket.emit('waitany');
			    });
			</script>

	</body>
</html>
