{% extends "layout.html" %}
{% block title %}Create Invoice{% endblock %}
{% block content %}
<script src="{{ url_for('static',filename='assets/js/qrcode.min.js') }}"></script>
<script src="{{ url_for('static',filename='assets/js/sweetalert2.all.min.js') }}"></script>
<script src="{{ url_for('static',filename='assets/css/sweetalert2.min.css') }}"></script>
<script>
	const createInvoice = function() {
		var amountSats = document.querySelector('#email').value;
		var messageValue = document.querySelector('#name').value;
		Swal.fire({
			title: 'Confirm Invoice',
			text: `Amount: ${amountSats}sats, Message: '${messageValue}'`,
			icon: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Confirm'
		}).then((result) => {
			if (result.isConfirmed) {
				var invoiceUrl = `/create_invoice/${amountSats}/${messageValue}`;
				window.location = invoiceUrl;
			}
		})
	}


</script>

<h2>Create Invoice</h2>
<p>Create a lightning network invoice.</p>
<section>
<div class="fields">
    <div class="field half">
	<label for="amount">Amount (Sats)</label>
	<input type="text" name="amount" id="email" />
    </div>
    <div class="field half">
	<label for="message">Message</label>
	<input type="text" name="message" id="name" />
    </div>
</div>
<ul class="actions">
	<li> <a class="button submit" onclick="createInvoice()">Create Invoice</a></li>
</ul>
</section>
{% endblock %}
{% block footer %}
    <div class="inner">
        <ul class="menu">
            <li>&copy; Alloy. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
        </ul>
    </div>
{% endblock %}
