{% extends "layout.html" %}
{% block title %}Peers{% endblock %}
{% block content %}
<div>
    <h2>Peers</h2>
    <table id="results-table">
        <tr>
            <th>Node Id</th>
            <th>Connection</th>
            <th>Sats Locked</th>
        </tr>
    </table>
</div>
{% endblock %}
{% block footer %}
    <div class="inner">
        <ul class="menu">
            <li>&copy; Alloy. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
        </ul>
    </div>

	<script src="{{ url_for('static',filename='assets/js/blockies.min.js') }}"></script>
	<script>
		var resultsTable = document.querySelector("#results-table");
		{% for peer in peers %}
			var isConnected = "{{ peer.connected }}";
			var onlineSymbol = isConnected === "True" ? "ðŸŸ¢" : "ðŸ”´";
			var nodeId = "{{ peer.id }}";
			var shortId = nodeId.slice(0,4) + "..." + nodeId.slice(-4);
			resultsTable.insertAdjacentHTML('beforeend', `
			<tr>
				<td><a href="https://1ml.com/testnet/node/{{ peer.id }}"> ${shortId} </a></td>
				<td><p> ${onlineSymbol} </p></td>
				<td><p> {{ peer.sats }}È™ </p></td>
			</tr>
			`);
		{% endfor %}
	</script>
{% endblock %}
