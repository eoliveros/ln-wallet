const decodePsbt = require('psbt');
const txHexDecoder = require("raw-transaction-hex-decoder");
const dpsbt = decodePsbt;

const getUnsignedPSBTAmount = function(psbtString) {
	const buffer = Buffer.from(psbtString, 'base64');
	const bufString = buffer.toString('hex');
	console.log(dpsbt.decodePsbt({psbt: bufString}));
	const rawTx = dpsbt.decodePsbt({psbt: bufString})["unsigned_transaction"];
	const btcDecodedRawTx = txHexDecoder.decodeRawUTXO(rawTx);
	var txOutputs = btcDecodedRawTx["outs"];
	// remove change address amount from outputs
	var changeOutput = txOutputs.pop();
	var totalSent = 0;
	for(var i=0; i < txOutputs.length; i++) {
		totalSent+=txOutputs[i]["value"];
	};
	console.log("Decoded transaction : "+JSON.stringify(btcDecodedRawTx));
	console.log(`total being sent in BTC is ${totalSent/100000000}`);
};

getUnsignedPSBTAmount("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");
